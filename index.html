<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CodeBogot√° - M√≥dulo 2: Dando √ìrdenes con L√≥gica</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;700&family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0D1117; /* GitHub Dark Dimmed */
            color: #C9D1D9;
        }
        .font-fira {
            font-family: 'Fira Code', monospace;
        }
        .neon-text-cyan {
            text-shadow: 0 0 5px rgba(56, 189, 248, 0.7), 0 0 10px rgba(56, 189, 248, 0.7);
        }
        .neon-shadow-cyan {
            box-shadow: 0 0 10px rgba(56, 189, 248, 0.5), 0 0 20px rgba(56, 189, 248, 0.3);
        }
        .neon-border-cyan {
            border-color: #38bdf8;
            box-shadow: 0 0 5px rgba(56, 189, 248, 0.6);
        }
        .slide {
            display: none;
            animation: fadeIn 0.6s ease-in-out;
        }
        .slide.active {
            display: block;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .help-button {
            transition: all 0.3s ease;
        }
        .help-button:hover {
            transform: scale(1.1) rotate(10deg);
            background-color: #38bdf8;
            color: #0D1117;
        }
        /* Estilos para el c√≥digo en la evaluaci√≥n final */
        .code-line {
            opacity: 0;
            transform: translateY(10px);
            transition: opacity 0.5s ease, transform 0.5s ease;
        }
        .code-line.visible {
            opacity: 1;
            transform: translateY(0);
        }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center justify-center p-4">

    <div class="w-full max-w-5xl bg-[#161B22] border border-gray-700 rounded-2xl shadow-2xl shadow-black/50 flex flex-col overflow-hidden">
        <!-- Encabezado y Barra de Progreso -->
        <header class="p-4 border-b border-gray-700">
            <h1 class="text-xl md:text-2xl font-bold text-sky-400 neon-text-cyan text-center">M√≥dulo 2: Dando √ìrdenes con L√≥gica</h1>
            <div class="w-full bg-gray-700 rounded-full h-2.5 mt-3">
                <div id="progressBar" class="bg-sky-500 h-2.5 rounded-full transition-all duration-500 ease-in-out" style="width: 0%"></div>
            </div>
        </header>

        <!-- Contenedor de Diapositivas -->
        <main id="slides-container" class="flex-grow p-6 md:p-8 min-h-[500px] flex items-center justify-center">
            <!-- Las diapositivas se insertar√°n aqu√≠ por JavaScript -->
        </main>

        <!-- Navegaci√≥n -->
        <footer class="p-4 bg-[#010409] border-t border-gray-700 flex justify-between items-center">
            <button id="prevBtn" class="bg-gray-700 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
                &larr; Anterior
            </button>
            <span id="slideCounter" class="text-sm text-gray-400"></span>
            <button id="nextBtn" class="bg-sky-600 hover:bg-sky-500 text-white font-bold py-2 px-4 rounded-lg transition-colors neon-shadow-cyan disabled:opacity-50 disabled:cursor-not-allowed">
                Siguiente &rarr;
            </button>
        </footer>
    </div>

    <!-- Modal de Ayuda -->
    <div id="helpModal" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 hidden z-50">
        <div class="bg-[#161B22] max-w-2xl w-full rounded-2xl border border-sky-500 neon-shadow-cyan p-6 relative">
            <button id="closeHelpModal" class="absolute top-4 right-4 text-gray-400 hover:text-white text-2xl">&times;</button>
            <div class="flex items-start gap-4">
                <div class="text-4xl">üí°</div>
                <div>
                    <h3 class="text-xl font-bold text-sky-400 mb-2">¬°Una ayudita!</h3>
                    <p id="helpModalContent" class="text-gray-300"></p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modal de Bienvenida/Resumen -->
    <div id="welcomeModal" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50">
        <div class="bg-[#161B22] max-w-lg w-full rounded-2xl border border-gray-700 p-8 text-center">
            <h2 class="text-2xl font-bold text-sky-400 mb-4 neon-text-cyan">¬°Bienvenido a CodeBogot√°!</h2>
            <p id="welcomeMessage" class="text-gray-300 mb-6">Est√°s a punto de iniciar el M√≥dulo 2. Aqu√≠ aprender√°s a darle a tus programas el poder de "razonar".</p>
            <div id="welcomeButtons">
                <button id="startFreshBtn" class="bg-sky-600 hover:bg-sky-500 text-white font-bold py-2 px-6 rounded-lg transition-colors w-full">Empezar M√≥dulo</button>
            </div>
        </div>
    </div>


<script>
const slidesContainer = document.getElementById('slides-container');
const nextBtn = document.getElementById('nextBtn');
const prevBtn = document.getElementById('prevBtn');
const progressBar = document.getElementById('progressBar');
const slideCounter = document.getElementById('slideCounter');
const helpModal = document.getElementById('helpModal');
const helpModalContent = document.getElementById('helpModalContent');
const closeHelpModal = document.getElementById('closeHelpModal');
const welcomeModal = document.getElementById('welcomeModal');

let currentSlide = 0;
let slidesData = []; // Se llenar√° con la data de las diapositivas

// --- DATA DE LAS DIAPOSITIVAS ---
// Aqu√≠ se define el contenido de cada diapositiva
slidesData = [
    // Introducci√≥n
    {
        title: "M√≥dulo 2: Dando √ìrdenes con L√≥gica üß†",
        content: `
            <p class="text-xl mb-4">¬°Felicitaciones por superar el M√≥dulo 1! Ya sabes hablarle al computador.</p>
            <p class="mb-6">Ahora, vamos a ense√±arle a "razonar". Prep√°rate para darle a tus programas el superpoder de tomar decisiones y repetir tareas.</p>
            <div class="bg-[#0D1117] p-4 rounded-lg border border-gray-700 italic">
                <strong>Piensa en esto:</strong> No siempre tomas la misma ruta por Bogot√°. Si la S√©ptima est√° imposible, coges la Circunvalar. Eso mismo le ense√±aremos a Python.
            </div>
        `,
        help: "¬°Hola! En el m√≥dulo anterior, aprendimos a crear 'cajitas' para guardar informaci√≥n (las variables). Ahora, vamos a subir el nivel. Haremos que nuestros programas dejen de ser una simple lista de instrucciones y empiecen a pensar por s√≠ mismos. ¬°Va a ser genial!"
    },
    {
        title: "Tu Hoja de Ruta para este M√≥dulo üó∫Ô∏è",
        content: `
            <p class="mb-6">Al finalizar, ser√°s capaz de:</p>
            <ul class="space-y-4 text-left max-w-md mx-auto">
                <li class="flex items-start gap-3"><span class="text-2xl">üö¶</span> <div><strong>Crear programas que tomen decisiones</strong> usando <code class="font-fira text-sky-400">if</code>, <code class="font-fira text-sky-400">elif</code>, y <code class="font-fira text-sky-400">else</code>.</div></li>
                <li class="flex items-start gap-3"><span class="text-2xl">‚úÖ</span> <div><strong>Entender la diferencia entre Verdadero y Falso</strong> (<code class="font-fira text-orange-400">True</code>/<code class="font-fira text-orange-400">False</code>) para el computador.</div></li>
                <li class="flex items-start gap-3"><span class="text-2xl">üîÑ</span> <div><strong>Repetir tareas autom√°ticamente</strong> con bucles <code class="font-fira text-sky-400">for</code> para no escribir c√≥digo de m√°s.</div></li>
                <li class="flex items-start gap-3"><span class="text-2xl">üß©</span> <div><strong>Combinar decisiones y repeticiones</strong> para crear soluciones m√°s inteligentes.</div></li>
            </ul>
        `,
        help: "Esta es nuestra 'lista de mercado' de conocimientos. Cada punto es una habilidad clave. Piensa en el primero (decisiones) como ense√±arle al programa a elegir caminos. El segundo (Verdadero/Falso) es la br√∫jula que usa para decidir. El tercero (repetir tareas) es ponerlo en 'piloto autom√°tico'. Y el √∫ltimo, es donde unimos todo para crear cosas incre√≠bles."
    },
    // Parte 1: Condicionales
    {
        title: "PARTE 1: Tomando Decisiones",
        content: `
            <div class="text-center">
                <p class="text-6xl mb-4">üö¶</p>
                <h2 class="text-3xl font-bold text-sky-400 mb-2">Condicionales: <code class="font-fira">if</code>, <code class="font-fira">elif</code>, <code class="font-fira">else</code></h2>
                <p>Le ense√±aremos a tu programa a evaluar una condici√≥n y actuar de una u otra forma, como cuando decides si llevar sombrilla dependiendo del impredecible clima bogotano.</p>
            </div>
        `,
        help: "Vamos a empezar con la base de la inteligencia de un programa: su capacidad de decidir. Sin esto, un programa solo podr√≠a hacer una cosa de la misma manera siempre. ¬°Aburrido! Con los condicionales, le damos vida."
    },
    {
        title: "¬øVerdadero o Falso? La Base de Todo",
        content: `
            <p class="mb-6">Antes de decidir, el computador solo entiende dos cosas: <code class="font-fira text-green-400 text-xl">True</code> (verdadero) o <code class="font-fira text-red-400 text-xl">False</code> (falso).</p>
            <p class="mb-8">A estos valores los llamamos <strong>Booleanos</strong>.</p>
            <div class="flex gap-8 justify-center">
                <div class="bg-green-500/20 border border-green-500 p-6 rounded-lg text-center">
                    <p class="text-5xl mb-2">‚úÖ</p>
                    <p class="text-2xl font-fira text-green-400">True</p>
                </div>
                <div class="bg-red-500/20 border border-red-500 p-6 rounded-lg text-center">
                    <p class="text-5xl mb-2">‚ùå</p>
                    <p class="text-2xl font-fira text-red-400">False</p>
                </div>
            </div>
            <p class="mt-8 italic">Es como preguntar: "¬øEst√° lloviendo en Bogot√°?" La respuesta solo puede ser s√≠ (<code class="font-fira text-green-400">True</code>) o no (<code class="font-fira text-red-400">False</code>).</p>
        `,
        help: "Los 'Booleanos' suenan complicados, pero son la idea m√°s simple y poderosa. Son las respuestas a una pregunta de s√≠ o no. Un computador, en su nivel m√°s b√°sico, funciona con millones de interruptores que est√°n encendidos (True) o apagados (False). Para que tome una decisi√≥n, debemos darle una pregunta que pueda responder con un simple 's√≠' o 'no'."
    },
    {
        title: "Las Herramientas para Preguntar ‚öñÔ∏è",
        content: `
            <p class="mb-6">Para hacerle preguntas a Python, usamos los <strong>operadores de comparaci√≥n</strong>:</p>
            <div class="space-y-4 font-fira text-lg text-left max-w-lg mx-auto bg-[#0D1117] p-6 rounded-lg border border-gray-700">
                <p><code class="text-sky-400 text-2xl font-bold">==</code> &nbsp; <span class="text-gray-400">// ¬øEs <strong>igual</strong> a?</span> &nbsp; -> &nbsp; <code class="text-yellow-400">dia == "domingo"</code></p>
                <p class="pl-4 text-sm text-red-400"><strong>¬°OJO!</strong> Un solo igual (<code class="font-fira">=</code>) asigna un valor. Dos iguales (<code class="font-fira">==</code>) preguntan.</p>
                <hr class="border-gray-600 my-3">
                <p><code class="text-sky-400 text-2xl font-bold">!=</code> &nbsp; <span class="text-gray-400">// ¬øEs <strong>diferente</strong> de?</span> &nbsp; -> &nbsp; <code class="text-yellow-400">clima != "soleado"</code></p>
            </div>
        `,
        help: "Pi√©nsalo como si hablaras con un ni√±o muy literal. Si le dices `edad = 18`, le ordenas: 'Tu edad AHORA ES 18'. Pero si le dices `edad == 18`, le preguntas: 'Oye, ¬øes verdad que tu edad es 18?'. √âl te responder√° `True` o `False`. El `!=` es para preguntar si algo NO es de cierta manera."
    },
     {
        title: "M√°s Herramientas: Comparando N√∫meros üî¢",
        content: `
            <p class="mb-6">Y para n√∫meros, usamos estos:</p>
            <div class="space-y-3 font-fira text-lg text-left max-w-lg mx-auto bg-[#0D1117] p-6 rounded-lg border border-gray-700">
                <p><code class="text-sky-400 text-2xl font-bold">></code> &nbsp;&nbsp; <span class="text-gray-400">// ¬øEs <strong>mayor</strong> que?</span> &nbsp; -> &nbsp; <code class="text-yellow-400">temperatura > 15</code></p>
                <p><code class="text-sky-400 text-2xl font-bold"><</code> &nbsp;&nbsp; <span class="text-gray-400">// ¬øEs <strong>menor</strong> que?</span> &nbsp; -> &nbsp; <code class="text-yellow-400">precio < 5000</code></p>
                <hr class="border-gray-600 my-2">
                <p><code class="text-sky-400 text-2xl font-bold">>=</code> &nbsp; <span class="text-gray-400">// ¬øEs <strong>mayor o igual</strong> que?</span> -> <code class="text-yellow-400">edad >= 18</code></p>
                <p><code class="text-sky-400 text-2xl font-bold"><=</code> &nbsp; <span class="text-gray-400">// ¬øEs <strong>menor o igual</strong> que?</span> -> <code class="text-yellow-400">pasajeros <= 5</code></p>
            </div>
        `,
        help: "Estos son s√∫per directos, ¬°son los mismos que viste en el colegio! El truco est√° en el 'o igual'. Por ejemplo, si tienes 18 a√±os, la pregunta `edad > 18` ser√≠a `False` (porque 18 no es *mayor* que 18). Pero `edad >= 18` ser√≠a `True` (porque 18 es *igual* a 18). Esa peque√±a l√≠nea debajo del s√≠mbolo puede cambiar todo."
    },
    {
        title: "Plan A: La Condici√≥n `if`",
        content: `
            <p class="mb-4">La estructura <code class="font-fira text-xl text-sky-400">if</code> (Si...) es tu condici√≥n principal.</p>
            <p class="mb-6 italic">"<strong>Si</strong> esta condici√≥n es <code class="font-fira text-green-400">True</code>, <strong>entonces</strong> haz este pedazo de c√≥digo."</p>
            <div class="font-fira text-left bg-[#010409] p-4 rounded-lg border border-gray-700 max-w-lg mx-auto">
                <pre><code class="language-python">
<span class="text-purple-400">edad</span> = <span class="text-orange-400">20</span>

<span class="text-pink-400">if</span> <span class="text-purple-400">edad</span> >= <span class="text-orange-400">18</span>:
  <span class="text-gray-500"># Si la respuesta es True, se ejecuta esta l√≠nea.</span>
  <span class="text-green-400">print(</span><span class="text-yellow-400">"Puedes entrar a la fiesta."</span><span class="text-green-400">)</span>
                </code></pre>
            </div>
        `,
        help: "El `if` es el portero de la discoteca. Tiene una regla en su cabeza (la condici√≥n: `edad >= 18`). Cuando llegas, te mira (eval√∫a la condici√≥n) y si cumples la regla (True), te deja pasar (ejecuta el c√≥digo de adentro). Si no la cumples, por ahora, simplemente te ignora y sigue de largo."
    },
    {
        title: "Plan B: La Alternativa `else`",
        content: `
            <p class="mb-4">El <code class="font-fira text-xl text-sky-400">else</code> (Si no...) es tu plan B. Se ejecuta <strong>solo</strong> si la condici√≥n del <code class="font-fira">if</code> fue <code class="font-fira text-red-400">False</code>.</p>
            <p class="mb-6 italic">"<strong>Si</strong> la condici√≥n principal no se cumpli√≥, <strong>entonces</strong> haz este otro c√≥digo."</p>
            <div class="font-fira text-left bg-[#010409] p-4 rounded-lg border border-gray-700 max-w-lg mx-auto">
                <pre><code class="language-python">
<span class="text-purple-400">edad</span> = <span class="text-orange-400">15</span>

<span class="text-pink-400">if</span> <span class="text-purple-400">edad</span> >= <span class="text-orange-400">18</span>:
  <span class="text-green-400">print(</span><span class="text-yellow-400">"Puedes entrar a la fiesta."</span><span class="text-green-400">)</span>
<span class="text-pink-400">else</span>:
  <span class="text-gray-500"># Como 15 >= 18 es False, el programa salta aqu√≠.</span>
  <span class="text-green-400">print(</span><span class="text-yellow-400">"Lo sentimos, debes esperar un poco m√°s."</span><span class="text-green-400">)</span>
                </code></pre>
            </div>
        `,
        help: "Siguiendo con el ejemplo del portero, el `else` es lo que te dice si no te deja entrar. El `if` es la condici√≥n para entrar. Si no la cumples, el `else` se activa y te da el mensaje de 'no puedes pasar'. Un `if` y un `else` juntos crean un camino con dos rutas posibles."
    },
    {
        title: "Planes C, D, E... La Opci√≥n `elif`",
        content: `
            <p class="mb-4">El <code class="font-fira text-xl text-sky-400">elif</code> (Si no, si...) te permite revisar m√∫ltiples condiciones en orden.</p>
            <p class="mb-6 italic">"<strong>Si</strong> el <code class="font-fira">if</code> no funcion√≥, <strong>revisa si</strong> esta otra condici√≥n es verdad..."</p>
            <div class="font-fira text-left bg-[#010409] p-4 rounded-lg border border-gray-700 max-w-xl mx-auto">
                <pre><code class="language-python">
<span class="text-purple-400">clima</span> = <span class="text-yellow-400">"lluvioso"</span>

<span class="text-pink-400">if</span> <span class="text-purple-400">clima</span> == <span class="text-yellow-400">"soleado"</span>:
  <span class="text-green-400">print(</span><span class="text-yellow-400">"¬°D√≠a de ciclov√≠a!"</span><span class="text-green-400">)</span>
<span class="text-pink-400">elif</span> <span class="text-purple-400">clima</span> == <span class="text-yellow-400">"lluvioso"</span>:
  <span class="text-green-400">print(</span><span class="text-yellow-400">"Parce, no olvide la sombrilla."</span><span class="text-green-400">)</span>
<span class="text-pink-400">else</span>:
  <span class="text-green-400">print(</span><span class="text-yellow-400">"Mejor lleve chaqueta."</span><span class="text-green-400">)</span>
                </code></pre>
            </div>
        `,
        help: "Imagina que buscas un bus. Primero te preguntas (if), ¬øpasa el M86? Si no, te preguntas (elif), ¬øpasa el L82? Si tampoco, tomas tu √∫ltima opci√≥n (else), que es tomar un taxi. Python hace lo mismo: revisa las condiciones en orden y se detiene en la primera que sea `True`. Si ninguna lo es, se va por el `else`."
    },
    {
        title: "¬°LA REGLA DE ORO: INDENTACI√ìN! üìè",
        content: `
            <p class="mb-4">En Python, el espacio al principio de una l√≠nea lo es todo. Se llama <strong>indentaci√≥n</strong>.</p>
            <p class="mb-6">La indentaci√≥n le dice a Python <strong>qu√© c√≥digo pertenece</strong> a un <code class="font-fira">if</code>, <code class="font-fira">elif</code>, o <code class="font-fira">else</code>. Si lo haces mal, <strong>¬°el programa no funcionar√°!</strong></p>
            <div class="font-fira text-left bg-[#010409] p-4 rounded-lg border border-gray-700 max-w-xl mx-auto">
                <pre><code class="language-python">
<span class="text-pink-400">if</span> <span class="text-purple-400">clima</span> == <span class="text-yellow-400">"soleado"</span>:
    <span class="text-gray-500"># Este print EST√Å INDENTADO.</span>
    <span class="text-gray-500"># Pertenece al if.</span>
    <span class="text-green-400">print(</span><span class="text-yellow-400">"¬°Usa bloqueador solar!"</span><span class="text-green-400">)</span>

<span class="text-green-400">print(</span><span class="text-yellow-400">"Que tengas un buen d√≠a."</span><span class="text-green-400">)</span> <span class="text-gray-500">// Este no, se ejecuta siempre.</span>
                </code></pre>
            </div>
        `,
        help: "Esta es la regla que m√°s dolores de cabeza da al principio, pero es s√∫per l√≥gica. La indentaci√≥n es como los m√°rgenes en un esquema. El texto que est√° m√°s a la derecha 'depende' del texto que est√° m√°s a su izquierda. En Python, el c√≥digo 'metido' hacia la derecha con espacios depende de la l√≠nea de `if` o `else` de arriba. Es la forma visual de organizar los bloques de c√≥digo."
    },
    // Pr√°ctica guiada: Pico y Placa
    {
        title: "Pr√°ctica: Simulador de Pico y Placa üöó",
        content: `
            <p class="mb-6">Vamos a crear un programa que nos diga si un carro tiene restricci√≥n.</p>
            <p class="font-bold text-lg mb-2">Paso 1: Guardar el √∫ltimo d√≠gito.</p>
            <p class="mb-4">Creamos una variable para guardar el n√∫mero.</p>
            <div class="font-fira text-left bg-[#010409] p-4 rounded-lg border border-gray-700 max-w-lg mx-auto">
                <pre><code class="language-python">
<span class="text-purple-400">ultimo_digito_placa</span> = <span class="text-orange-400">7</span>
<span class="text-green-400">print(</span><span class="text-yellow-400">"Revisando el d√≠gito: "</span> + <span class="text-blue-400">str</span>(<span class="text-purple-400">ultimo_digito_placa</span>)<span class="text-green-400">)</span>
                </code></pre>
            </div>
            <p class="mt-4 text-sm text-gray-400">*<code class="font-fira text-blue-400">str()</code> convierte el n√∫mero 7 en el texto "7" para poder unirlo al mensaje.</p>
        `,
        help: "`str()` es como un traductor. La funci√≥n `print` puede mostrar texto, pero no le gusta cuando intentas 'sumar' un texto con un n√∫mero. Es como intentar sumar 'manzana' + 5. Al usar `str()`, le decimos: 'Oye, Python, convierte este n√∫mero en un car√°cter de texto para que `print` lo entienda'."
    },
    {
        title: "Pr√°ctica: Simulador de Pico y Placa üöó",
        content: `
            <p class="font-bold text-lg mb-2">Paso 2: Usar <code class="font-fira">if</code> y <code class="font-fira">else</code>.</p>
            <p class="mb-4">Supongamos que los d√≠gitos del 1 al 5 tienen pico y placa.</p>
            <div class="font-fira text-left bg-[#010409] p-4 rounded-lg border border-gray-700 max-w-xl mx-auto">
                <pre><code class="language-python">
<span class="text-purple-400">ultimo_digito_placa</span> = <span class="text-orange-400">7</span>
<span class="text-green-400">print(</span><span class="text-yellow-400">"Revisando el d√≠gito: "</span> + <span class="text-blue-400">str</span>(<span class="text-purple-400">ultimo_digito_placa</span>)<span class="text-green-400">)</span>

<span class="text-pink-400">if</span> <span class="text-purple-400">ultimo_digito_placa</span> <= <span class="text-orange-400">5</span>:
  <span class="text-green-400">print(</span><span class="text-yellow-400">"¬°Ojo! Este carro tiene Pico y Placa."</span><span class="text-green-400">)</span>
<span class="text-pink-400">else</span>:
  <span class="text-green-400">print(</span><span class="text-yellow-400">"El carro puede salir sin problema."</span><span class="text-green-400">)</span>
                </code></pre>
            </div>
            <p class="mt-4">Con el d√≠gito 7, ¬øqu√© crees que pasar√°?</p>
        `,
        help: "Analicemos la condici√≥n: `ultimo_digito_placa <= 5`. Python reemplaza la variable por su valor: `7 <= 5`. Luego se pregunta, ¬øes 7 menor o igual que 5? La respuesta es `False`. Como el `if` result√≥ falso, Python ignora su c√≥digo y salta directamente al bloque del `else`."
    },
    {
        title: "Pr√°ctica: Simulador de Pico y Placa üöó",
        content: `
            <p class="font-bold text-lg mb-4">¬°A experimentar!</p>
            <p class="mb-4">El resultado con el d√≠gito 7 es:</p>
            <div class="font-fira text-left bg-black p-4 rounded-lg border border-gray-700 max-w-md mx-auto">
                <p class="text-green-400">> Revisando el d√≠gito: 7</p>
                <p class="text-white">> El carro puede salir sin problema.</p>
            </div>
            <p class="mt-6">Ahora, en tu cabeza, cambia el valor de <code class="font-fira">ultimo_digito_placa</code> a <strong>3</strong>. ¬øQu√© resultado obtendr√≠as?</p>
        `,
        help: "¬°Lo lograste! Este es el n√∫cleo de la programaci√≥n: crear reglas y dejar que el computador las siga. Si cambias el n√∫mero a 3, la condici√≥n `3 <= 5` ser√° `True`, y ver√°s c√≥mo el programa toma el otro camino, el del `if`, y te muestra el mensaje de restricci√≥n. Est√°s controlando el flujo de tu programa."
    },
    // Checkpoint 1
    {
        title: "checkpoint ! Punto de Control üßê",
        type: 'quiz',
        question: 'Dado el siguiente c√≥digo, ¬øqu√© mensaje se imprimir√° en la pantalla?',
        code: `
temperatura = 22
if temperatura > 25:
  print("¬°D√≠a caluroso!")
elif temperatura > 18:
  print("¬°Clima agradable!")
else:
  print("¬°Hace fr√≠o!")
        `,
        options: ["¬°D√≠a caluroso!", "¬°Clima agradable!", "¬°Hace fr√≠o!", "Ninguno, hay un error."],
        answer: 1,
        feedback: {
            correct: "¬°Correcto! Python primero revisa `22 > 25` (Falso). Luego pasa al `elif` y revisa `22 > 18` (Verdadero), as√≠ que imprime '¬°Clima agradable!' y se detiene.",
            incorrect: "¬°Casi! Revisa las condiciones en orden. La primera que sea verdadera es la que se ejecuta. Python revisa `22 > 25` (falso), luego `22 > 18` (verdadero) y se detiene ah√≠."
        },
        help: "Recuerda que Python lee el c√≥digo de arriba hacia abajo. En una cadena de `if/elif/else`, tan pronto como encuentra una condici√≥n que es `True`, ejecuta el c√≥digo de ese bloque y luego ignora por completo el resto de los `elif` y el `else` de esa cadena."
    },
    // Checkpoint 1.5 (Pr√°ctica Aut√≥noma)
    {
        title: "checkpoint ! ¬°Tu Turno! ü•≥",
        type: 'quiz',
        question: 'Quieres un programa que imprima "Puedes entrar a la fiesta" si la edad es 18 o m√°s, y "Debes esperar" si no. Si `edad = 17`, ¬øqu√© se imprime?',
        code: `
edad = 17
if edad >= 18:
  print("Puedes entrar a la fiesta")
else:
  print("Debes esperar")
        `,
        options: ["Puedes entrar a la fiesta", "Debes esperar"],
        answer: 1,
        feedback: {
            correct: "¬°Exacto! Como 17 no es mayor o igual a 18, la condici√≥n del `if` es falsa y el programa ejecuta el c√≥digo del `else`.",
            incorrect: "No del todo. La condici√≥n a evaluar es `17 >= 18`. ¬øEs eso verdadero o falso? Basado en esa respuesta, el programa elige qu√© imprimir."
        },
        help: "Este es el uso m√°s cl√°sico de un `if/else`: una decisi√≥n binaria. O cumples la condici√≥n, o no la cumples. No hay m√°s opciones. Es perfecto para casos de 'aprobado/reprobado', 'dentro/fuera', 's√≠/no'."
    },
    // Parte 2: Bucles
    {
        title: "PARTE 2: Repitiendo Tareas",
        content: `
            <div class="text-center">
                <p class="text-6xl mb-4">üîÑ</p>
                <h2 class="text-3xl font-bold text-sky-400 mb-2">Bucles <code class="font-fira">for</code></h2>
                <p>¬øPara qu√© escribir el mismo c√≥digo mil veces? Mejor, ¬°que el computador lo haga por ti! Es como una ruta de Transmilenio: en cada estaci√≥n haces lo mismo (abrir y cerrar puertas).</p>
            </div>
        `,
        help: "Los bucles son uno de los conceptos m√°s importantes. Son la clave de la automatizaci√≥n. Cualquier tarea que sientas que es repetitiva (imprimir 100 tiquetes, revisar 50 correos, saludar a 20 usuarios) es un trabajo perfecto para un bucle `for`."
    },
     {
        title: "La Sintaxis: 'Para cada... en...'",
        content: `
            <p class="mb-6">El bucle se lee casi como una frase normal.</p>
            <div class="font-fira text-left bg-[#010409] p-4 rounded-lg border border-gray-700 max-w-xl mx-auto">
                <pre><code class="language-python">
<span class="text-pink-400">for</span> <span class="text-purple-400">localidad</span> <span class="text-pink-400">in</span> <span class="text-yellow-400">localidades</span>:
  <span class="text-gray-500"># (1) C√≥digo que se repite (¬°indentado!)</span>
  <span class="text-green-400">print(</span><span class="text-yellow-400">"Visitando: "</span> + <span class="text-purple-400">localidad</span><span class="text-green-400">)</span>
                </code></pre>
            </div>
            <ul class="text-left max-w-xl mx-auto mt-6 space-y-2 text-gray-400">
                <li><code class="font-fira text-purple-400">localidad</code>: Es una <strong>variable temporal</strong>. En cada "vuelta", guardar√° un elemento de la colecci√≥n.</li>
                <li><code class="font-fira text-yellow-400">localidades</code>: Es la <strong>colecci√≥n</strong> o grupo de elementos que vamos a recorrer.</li>
            </ul>
        `,
        help: "La mejor forma de leer esta l√≠nea es literalmente: 'Para cada `localidad` que se encuentre en la lista `localidades`, haz lo siguiente:'. La variable `localidad` es como una mano que, en la primera vuelta, agarra el primer elemento de la lista. En la segunda, suelta el primero y agarra el segundo, y as√≠ hasta que se acaban los elementos."
    },
    // Pr√°ctica guiada: Localidades
    {
        title: "Pr√°ctica: Recorriendo Localidades üèôÔ∏è",
        content: `
            <p class="font-bold text-lg mb-2">Paso 1: Crear una lista.</p>
            <p class="mb-4">Una lista es una colecci√≥n de elementos. La creamos con corchetes <code class="font-fira">[]</code> y comas.</p>
            <div class="font-fira text-left bg-[#010409] p-4 rounded-lg border border-gray-700 max-w-lg mx-auto">
                <pre><code class="language-python">
<span class="text-gray-500"># Esto es una lista de textos (strings)</span>
<span class="text-purple-400">localidades</span> = [<span class="text-yellow-400">"Usaqu√©n"</span>, <span class="text-yellow-400">"Chapinero"</span>, <span class="text-yellow-400">"Suba"</span>]
                </code></pre>
            </div>
        `,
        help: "Las listas son como una bolsa de mercado. Puedes meter muchas cosas dentro (en este caso, los nombres de las localidades) y luego puedes ir sacando cada cosa de una en una para hacer algo con ella. Veremos las listas con mucho m√°s detalle en el M√≥dulo 3, ¬°pero por ahora esta idea es suficiente!"
    },
    {
        title: "Pr√°ctica: Recorriendo Localidades üèôÔ∏è",
        content: `
            <p class="font-bold text-lg mb-2">Paso 2: Crear el bucle <code class="font-fira">for</code>.</p>
            <p class="mb-4">Ahora, le decimos a Python que recorra la lista e imprima cada elemento.</p>
            <div class="font-fira text-left bg-[#010409] p-4 rounded-lg border border-gray-700 max-w-xl mx-auto">
                <pre><code class="language-python">
<span class="text-purple-400">localidades</span> = [<span class="text-yellow-400">"Usaqu√©n"</span>, <span class="text-yellow-400">"Chapinero"</span>, <span class="text-yellow-400">"Suba"</span>]

<span class="text-pink-400">for</span> <span class="text-purple-400">localidad</span> <span class="text-pink-400">in</span> <span class="text-yellow-400">localidades</span>:
  <span class="text-green-400">print(</span><span class="text-yellow-400">"Visitando la localidad de: "</span> + <span class="text-purple-400">localidad</span><span class="text-green-400">)</span>
                </code></pre>
            </div>
            <p class="mt-4">¬øCu√°l ser√° el resultado en la consola?</p>
        `,
        help: "Piensa en lo que hace el bucle. 1. Primera vuelta: `localidad` se convierte en 'Usaqu√©n'. Imprime 'Visitando... Usaqu√©n'. 2. Segunda vuelta: `localidad` se convierte en 'Chapinero'. Imprime 'Visitando... Chapinero'. 3. Y as√≠... hasta llegar a 'Suba'. Despu√©s de eso, la lista se acaba y el bucle termina."
    },
    {
        title: "Pr√°ctica: Recorriendo Localidades üèôÔ∏è",
        content: `
            <p class="font-bold text-lg mb-4">¬°Resultado!</p>
            <div class="font-fira text-left bg-black p-4 rounded-lg border border-gray-700 max-w-md mx-auto">
                <p class="text-white">> Visitando la localidad de: Usaqu√©n</p>
                <p class="text-white">> Visitando la localidad de: Chapinero</p>
                <p class="text-white">> Visitando la localidad de: Suba</p>
            </div>
            <p class="mt-6">¬°Perfecto! Con solo 2 l√≠neas de c√≥digo, procesamos 3 elementos. Si la lista tuviera 1.000, ¬°el c√≥digo ser√≠a el mismo!</p>
        `,
        help: "¬øVes el poder de esto? Has automatizado una tarea. En lugar de escribir tres `print` diferentes, le diste una instrucci√≥n gen√©rica al bucle y √©l se encarg√≥ del trabajo pesado. Esa es la magia de los bucles: la eficiencia."
    },
    {
        title: "Repetir un N√∫mero Fijo de Veces con `range()` üñêÔ∏è",
        content: `
            <p class="mb-4">A veces no tienes una lista, solo quieres <strong>repetir algo X veces</strong>. Para eso usamos <code class="font-fira text-blue-400">range()</code>.</p>
            <div class="bg-[#0D1117] p-4 rounded-lg border border-gray-700">
                <p class="font-fira text-lg"><code class="text-blue-400">range(5)</code> genera una secuencia de n√∫meros: <code class="text-orange-400">0, 1, 2, 3, 4</code></p>
                <p class="text-red-400 mt-2"><strong>¬°Atenci√≥n!</strong> Siempre empieza en 0 y <strong>no incluye el n√∫mero final</strong>.</p>
            </div>
            <div class="font-fira text-left bg-[#010409] p-4 mt-6 rounded-lg border border-gray-700 max-w-xl mx-auto">
                <pre><code class="language-python">
<span class="text-pink-400">for</span> <span class="text-purple-400">numero</span> <span class="text-pink-400">in</span> <span class="text-blue-400">range(3)</span>: <span class="text-gray-500"># Esto se repetir√° 3 veces (0, 1, 2)</span>
  <span class="text-green-400">print(</span><span class="text-yellow-400">"Vuelta N¬∞ "</span> + <span class="text-blue-400">str</span>(<span class="text-purple-400">numero</span> + <span class="text-orange-400">1</span>)<span class="text-green-400">)</span>
                </code></pre>
            </div>
            <p class="mt-2 text-sm text-gray-400">*Sumamos 1 solo para que el mensaje se vea m√°s natural (de 1 a 3 en vez de 0 a 2).</p>
        `,
        help: "`range()` es un generador de secuencias de n√∫meros. Es como si le pidieras a alguien que contara en voz alta para ti. Si le dices `range(3)`, √©l contar√° '0, 1, 2' y se detendr√°. Lo usamos con `for` para tener un bucle que sabemos exactamente cu√°ntas veces se va a repetir."
    },
    // Checkpoint 2
    {
        title: "checkpoint ! Punto de Control ü§ì",
        type: 'quiz',
        question: '¬øCu√°ntas veces se imprimir√° el mensaje "Hola" con el siguiente c√≥digo?',
        code: `
for i in range(4):
  print("Hola")
        `,
        options: ["3 veces", "4 veces", "5 veces", "Infinitas veces"],
        answer: 1,
        feedback: {
            correct: "¬°Correcto! `range(4)` genera la secuencia 0, 1, 2, 3. El bucle se ejecuta una vez por cada n√∫mero en esa secuencia, es decir, 4 veces.",
            incorrect: "Recuerda que `range(N)` genera N n√∫meros, comenzando desde 0 hasta N-1. As√≠ que `range(4)` es `0, 1, 2, 3`."
        },
        help: "Un error com√∫n es pensar que `range(4)` va hasta el 4. ¬°Pero no! Siempre se detiene un n√∫mero antes. Si quieres contar hasta 4 (1, 2, 3, 4), podr√≠as usar `range(1, 5)`... ¬°pero eso es un tema para m√°s adelante!"
    },
    // Checkpoint 2.5 (Pr√°ctica Aut√≥noma)
    {
        title: "checkpoint ! ¬°Tu Turno! ‚úñÔ∏è",
        type: 'text_input',
        question: 'El siguiente c√≥digo debe imprimir la tabla del 3 (3, 6, 9). ¬øQu√© falta en el espacio en blanco?',
        code: `
for numero in range(1, 4):
  resultado = 3 * _____
  print(resultado)
        `,
        answer: "numero",
        feedback: {
            correct: "¬°Perfecto! En cada vuelta, `numero` valdr√° 1, luego 2, y luego 3. Al multiplicarlo por 3, obtienes la tabla de multiplicar.",
            incorrect: "¬°Casi! Piensa en qu√© variable est√° cambiando en cada vuelta del bucle y contiene los valores 1, 2 y 3 que necesitas para multiplicar."
        },
        help: "La variable que declaras en el `for` (en este caso, `numero`) es tu herramienta principal dentro del bucle. En cada iteraci√≥n, contiene un valor diferente de la secuencia, listo para que lo uses en tus c√°lculos."
    },
    // Desaf√≠o Final
    {
        title: "M√≥dulo 2: Desaf√≠o Final",
        content: `
            <div class="text-center">
                 <p class="text-6xl mb-4">üèÜ</p>
                <h2 class="text-3xl font-bold text-sky-400 mb-2">Simulador de Acceso a Evento</h2>
                <p class="mb-6">¬°Es hora de combinarlo todo! Vamos a crear un programa que decida si una persona puede entrar a un evento y a qu√© zona.</p>
                <ul class="text-left max-w-lg mx-auto space-y-2 list-disc list-inside bg-[#0D1117] p-6 rounded-lg border border-gray-700">
                    <li>La persona debe tener <strong>18 a√±os o m√°s</strong> para entrar.</li>
                    <li>Si entra, revisaremos su tipo de boleto: <strong>"VIP"</strong> o <strong>"General"</strong>.</li>
                    <li>Se debe imprimir un mensaje de bienvenida diferente para cada zona.</li>
                    <li>Si es menor de edad, se le debe negar el acceso.</li>
                </ul>
                <p class="mt-6">¬øListo para construir la soluci√≥n paso a paso?</p>
            </div>
        `,
        help: "¬°Este es el momento de la verdad! Aqu√≠ vamos a usar un `if` para la edad, y dentro de ese `if`, vamos a usar *otro* `if` para el tipo de boleto. A esto se le llama 'condicionales anidados'. Es como un puesto de control dentro de otro. Primero te revisan la edad y, si pasas, luego te revisan el boleto."
    },
    // Evaluaci√≥n Final Interactiva
    {
        title: "Construyendo la Soluci√≥n üìù",
        type: 'final_evaluation',
        steps: [
            {
                question: 'Primero, guardemos la informaci√≥n. ¬øC√≥mo crear√≠as una variable llamada `edad` para una persona de 25 a√±os?',
                answer: 'edad=25',
                codeLine: '<span class="text-purple-400">edad</span> = <span class="text-orange-400">25</span>'
            },
            {
                question: 'Ahora, crea una variable `tipo_boleto` que guarde el texto "VIP". ¬°Ojo con las comillas!',
                answer: 'tipo_boleto="VIP"',
                codeLine: '<span class="text-purple-400">tipo_boleto</span> = <span class="text-yellow-400">"VIP"</span>'
            },
            {
                question: 'Vamos con la regla principal: la edad. ¬øC√≥mo escribes la condici√≥n `if` para verificar si la `edad` es mayor o igual a 18? (No olvides los dos puntos `:` al final)',
                answer: 'ifedad>=18:',
                codeLine: '<br><span class="text-pink-400">if</span> <span class="text-purple-400">edad</span> >= <span class="text-orange-400">18</span>:'
            },
            {
                question: 'Si es mayor de edad, revisamos el boleto. Escribe un `if` para comprobar si `tipo_boleto` es **igual a** "VIP". (¬°Con indentaci√≥n y doble igual!)',
                answer: 'iftipo_boleto=="VIP":',
                codeLine: '  <span class="text-pink-400">if</span> <span class="text-purple-400">tipo_boleto</span> == <span class="text-yellow-400">"VIP"</span>:'
            },
            {
                question: 'Perfecto. Ahora imprime el mensaje para los VIP: "Acceso a la zona VIP. ¬°Disfruta!". (¬°Doble indentaci√≥n!)',
                answer: 'print("AccesoalazonaVIP.¬°Disfruta!")',
                codeLine: '    <span class="text-green-400">print(</span><span class="text-yellow-400">"Acceso a la zona VIP. ¬°Disfruta!"</span><span class="text-green-400">)</span>'
            },
            {
                question: '¬øY si el boleto no es VIP? Escribe el `else` que corresponde al `if` del boleto. (Con una sola indentaci√≥n)',
                answer: 'else:',
                codeLine: '  <span class="text-pink-400">else</span>:'
            },
            {
                question: 'Ahora, el mensaje para el boleto General: "Acceso a zona General. ¬°Que disfrutes!". (¬°Doble indentaci√≥n!)',
                answer: 'print("AccesoazonaGeneral.¬°Quedisfrutes!")',
                codeLine: '    <span class="text-green-400">print(</span><span class="text-yellow-400">"Acceso a zona General. ¬°Que disfrutes!"</span><span class="text-green-400">)</span>'
            },
            {
                question: 'Ya cubrimos a los mayores de edad. ¬øQu√© pasa si la primera condici√≥n (`edad >= 18`) es falsa? Escribe el `else` principal. (¬°Sin indentaci√≥n!)',
                answer: 'else:',
                codeLine: '<span class="text-pink-400">else</span>:'
            },
            {
                question: 'Y finalmente, el mensaje para los menores de edad: "Lo sentimos, no puedes ingresar.". (¬°Con indentaci√≥n!)',
                answer: 'print("Losentimos,nopuedesingresar.")',
                codeLine: '  <span class="text-green-400">print(</span><span class="text-yellow-400">"Lo sentimos, no puedes ingresar."</span><span class="text-green-400">)</span>'
            }
        ],
        help: "Este desaf√≠o une todo. Observa c√≥mo el `if/else` del boleto est√° *completamente dentro* del primer `if`. Eso se llama anidaci√≥n. Solo si la primera condici√≥n es verdadera, el programa empieza a mirar la segunda. Si la primera es falsa, salta todo ese bloque y va directo al `else` principal."
    },
    // Conclusi√≥n
    {
        title: "¬°Desaf√≠o Superado! üéâ",
        content: `
             <div class="text-center">
                <p class="text-4xl md:text-5xl">¬°Felicitaciones! Has completado el desaf√≠o y el M√≥dulo 2.</p>
                <p class="mt-4 mb-6">Construiste un programa con l√≥gica compleja, ¬°est√°s pensando como un programador!</p>
                <div class="font-fira text-left bg-[#010409] p-4 rounded-lg border border-gray-700 max-w-xl mx-auto">
                    <pre><code class="language-python">
<span class="text-purple-400">edad</span> = <span class="text-orange-400">25</span>
<span class="text-purple-400">tipo_boleto</span> = <span class="text-yellow-400">"VIP"</span>

<span class="text-pink-400">if</span> <span class="text-purple-400">edad</span> >= <span class="text-orange-400">18</span>:
  <span class="text-pink-400">if</span> <span class="text-purple-400">tipo_boleto</span> == <span class="text-yellow-400">"VIP"</span>:
    <span class="text-green-400">print(</span><span class="text-yellow-400">"Acceso a la zona VIP. ¬°Disfruta!"</span><span class="text-green-400">)</span>
  <span class="text-pink-400">else</span>:
    <span class="text-green-400">print(</span><span class="text-yellow-400">"Acceso a zona General. ¬°Que disfrutes!"</span><span class="text-green-400">)</span>
<span class="text-pink-400">else</span>:
  <span class="text-green-400">print(</span><span class="text-yellow-400">"Lo sentimos, no puedes ingresar."</span><span class="text-green-400">)</span>
                    </code></pre>
                </div>
            </div>
        `,
        help: "¬°Lo lograste! Has completado uno de los m√≥dulos m√°s importantes de la programaci√≥n. Entender condicionales y bucles te abre la puerta a crear programas que pueden hacer cosas incre√≠blemente √∫tiles y complejas. ¬°Sigue as√≠!"
    },
    {
        title: "Resumen y Pr√≥ximos Pasos üöÄ",
        content: `
            <h2 class="text-3xl font-bold text-sky-400 mb-6">M√≥dulo 2 Completado</h2>
            <p class="mb-6">Hoy aprendiste a:</p>
            <ul class="space-y-3 text-left max-w-md mx-auto list-disc list-inside">
                <li>Controlar el flujo de tu programa con <code class="font-fira">if</code>, <code class="font-fira">elif</code> y <code class="font-fira">else</code>.</li>
                <li>Usar operadores de comparaci√≥n (<code class="font-fira">==, >, <=,</code> etc.).</li>
                <li>La importancia CRUCIAL de la indentaci√≥n.</li>
                <li>Automatizar tareas con bucles <code class="font-fira">for</code> y <code class="font-fira">range()</code>.</li>
                <li>Combinar estas herramientas para resolver problemas.</li>
            </ul>
            <p class="mt-8"><strong>En el M√≥dulo 3: "Colecciones: Guardando Cosas en Grupo"</strong>, profundizaremos en las listas y otras formas de organizar grandes cantidades de datos.</p>
            <p class="mt-2 font-bold text-lg">¬°Nos vemos all√°!</p>
        `,
        help: "¬°Ya casi eres un experto! El pr√≥ximo m√≥dulo se trata de organizaci√≥n. Si las variables son cajas para guardar una cosa, las colecciones son estanter√≠as para guardar muchas cajas de forma ordenada. ¬°Es la base para manejar grandes vol√∫menes de informaci√≥n!"
    }
];

// --- FUNCIONES DE LA APLICACI√ìN ---

function createSlideHTML(slideData, index) {
    const slideDiv = document.createElement('div');
    slideDiv.className = 'slide w-full h-full flex flex-col items-center justify-center text-center';
    slideDiv.dataset.index = index;

    let contentHTML = `
        <div class="absolute top-4 right-4">
            <button class="help-button bg-gray-700 text-sky-400 font-bold rounded-full w-10 h-10 flex items-center justify-center text-xl" data-help-text="${slideData.help.replace(/"/g, '&quot;')}">?</button>
        </div>
        <h2 class="text-2xl md:text-3xl font-bold text-sky-400 mb-6">${slideData.title}</h2>
    `;
    
    // Contenido din√°mico seg√∫n el tipo de diapositiva
    if (slideData.type === 'quiz') {
        const optionsHTML = slideData.options.map((option, i) => `
            <label class="block w-full text-left p-4 border border-gray-700 rounded-lg hover:bg-sky-900/50 hover:border-sky-500 cursor-pointer transition-colors">
                <input type="radio" name="quiz${index}" value="${i}" class="mr-3">
                ${option.includes('<') ? option : `<span class="font-fira">${option}</span>`}
            </label>
        `).join('');

        contentHTML += `
            <div class="w-full max-w-2xl text-lg">
                <p class="mb-4">${slideData.question}</p>
                ${slideData.code ? `<div class="font-fira text-left bg-[#010409] p-4 rounded-lg border border-gray-700 max-w-lg mx-auto mb-6"><pre><code>${slideData.code.trim()}</code></pre></div>` : ''}
                <div class="space-y-3 mb-4">${optionsHTML}</div>
                <button class="check-answer-btn bg-green-600 hover:bg-green-500 text-white font-bold py-2 px-6 rounded-lg">Comprobar</button>
                <p class="feedback-msg mt-4 h-12"></p>
            </div>
        `;
    } else if (slideData.type === 'text_input') {
         contentHTML += `
            <div class="w-full max-w-2xl text-lg">
                <p class="mb-4">${slideData.question}</p>
                <div class="font-fira text-left bg-[#010409] p-4 rounded-lg border border-gray-700 max-w-lg mx-auto mb-6"><pre><code>${slideData.code.trim()}</code></pre></div>
                <input type="text" class="text-input font-fira bg-gray-900 border-2 border-gray-600 rounded-lg p-2 w-full max-w-sm mx-auto block focus:border-sky-500 focus:outline-none" placeholder="Escribe tu respuesta aqu√≠...">
                <button class="check-answer-btn mt-4 bg-green-600 hover:bg-green-500 text-white font-bold py-2 px-6 rounded-lg">Comprobar</button>
                <p class="feedback-msg mt-4 h-12"></p>
            </div>
        `;
    } else if (slideData.type === 'final_evaluation') {
         contentHTML += `
            <div class="w-full max-w-3xl flex flex-col md:flex-row gap-6">
                <div class="flex-1 md:w-1/2">
                    <p id="eval-question" class="text-lg mb-4 text-left"></p>
                    <input type="text" id="eval-input" class="text-input font-fira bg-gray-900 border-2 border-gray-600 rounded-lg p-2 w-full focus:border-sky-500 focus:outline-none" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
                    <button id="eval-check-btn" class="mt-4 bg-green-600 hover:bg-green-500 text-white font-bold py-2 px-6 rounded-lg w-full">Comprobar</button>
                    <p id="eval-feedback" class="mt-4 h-8 text-left"></p>
                </div>
                <div class="flex-1 md:w-1/2 font-fira text-left bg-[#010409] p-4 rounded-lg border border-gray-700">
                    <pre><code id="eval-code-display"></code></pre>
                </div>
            </div>
        `;
    } else {
        contentHTML += `<div class="w-full max-w-3xl text-lg">${slideData.content}</div>`;
    }
    
    slideDiv.innerHTML = contentHTML;
    return slideDiv;
}

function renderSlides() {
    slidesContainer.innerHTML = '';
    slidesData.forEach((slide, index) => {
        slidesContainer.appendChild(createSlideHTML(slide, index));
    });
}


function showSlide(index) {
    const slides = document.querySelectorAll('.slide');
    slides.forEach((slide, i) => {
        slide.classList.toggle('active', i === index);
    });

    currentSlide = index;
    localStorage.setItem('codeBogotaModule2Progress', currentSlide);
    updateUI();
    
    // Si es una diapositiva de checkpoint, deshabilitar "Siguiente"
    const currentSlideData = slidesData[index];
    if (currentSlideData.type === 'quiz' || currentSlideData.type === 'text_input' || currentSlideData.type === 'final_evaluation') {
        nextBtn.disabled = true;
    }

    if(currentSlideData.type === 'final_evaluation') {
        startFinalEvaluation();
    }
}

function updateUI() {
    // Barra de progreso
    const progress = ((currentSlide + 1) / slidesData.length) * 100;
    progressBar.style.width = `${progress}%`;

    // Contador de diapositivas
    slideCounter.textContent = `Diapositiva ${currentSlide + 1} de ${slidesData.length}`;

    // Botones de navegaci√≥n
    prevBtn.disabled = currentSlide === 0;
    nextBtn.disabled = (slidesData[currentSlide].type === 'quiz' || slidesData[currentSlide].type === 'text_input' || slidesData[currentSlide].type === 'final_evaluation') || (currentSlide === slidesData.length - 1);
}

// --- L√ìGICA DE QUIZ Y CHECKPOINTS ---

function handleQuizCheck(slideElement) {
    const selected = slideElement.querySelector('input[type="radio"]:checked');
    const feedbackMsg = slideElement.querySelector('.feedback-msg');
    const slideIndex = parseInt(slideElement.dataset.index);
    const slideData = slidesData[slideIndex];

    if (!selected) {
        feedbackMsg.textContent = "Por favor, selecciona una opci√≥n.";
        feedbackMsg.className = 'feedback-msg mt-4 h-12 text-yellow-400';
        return;
    }

    if (parseInt(selected.value) === slideData.answer) {
        feedbackMsg.textContent = slideData.feedback.correct;
        feedbackMsg.className = 'feedback-msg mt-4 h-12 text-green-400';
        nextBtn.disabled = false;
        slideElement.querySelector('.check-answer-btn').disabled = true;
    } else {
        feedbackMsg.textContent = slideData.feedback.incorrect;
        feedbackMsg.className = 'feedback-msg mt-4 h-12 text-red-400';
        nextBtn.disabled = false; // Permitir avanzar aunque se equivoque
    }
}

function handleTextInputCheck(slideElement) {
    const input = slideElement.querySelector('.text-input');
    const feedbackMsg = slideElement.querySelector('.feedback-msg');
    const slideIndex = parseInt(slideElement.dataset.index);
    const slideData = slidesData[slideIndex];

    const userAnswer = input.value.trim().toLowerCase();
    const correctAnswer = slideData.answer.trim().toLowerCase();

    if (userAnswer === correctAnswer) {
        feedbackMsg.textContent = slideData.feedback.correct;
        feedbackMsg.className = 'feedback-msg mt-4 h-12 text-green-400';
        nextBtn.disabled = false;
        slideElement.querySelector('.check-answer-btn').disabled = true;
        input.disabled = true;
    } else {
        feedbackMsg.textContent = slideData.feedback.incorrect;
        feedbackMsg.className = 'feedback-msg mt-4 h-12 text-red-400';
        nextBtn.disabled = false;
    }
}


// --- L√ìGICA DE EVALUACI√ìN FINAL ---

let evalStep = 0;
function startFinalEvaluation() {
    evalStep = 0;
    document.getElementById('eval-code-display').innerHTML = '';
    askEvalQuestion();
}

function askEvalQuestion() {
    const slideData = slidesData[currentSlide];
    if (evalStep < slideData.steps.length) {
        document.getElementById('eval-question').textContent = slideData.steps[evalStep].question;
        document.getElementById('eval-input').value = '';
        document.getElementById('eval-input').focus();
        document.getElementById('eval-feedback').textContent = '';
    } else {
        document.getElementById('eval-question').textContent = "¬°Lo has conseguido! C√≥digo completo.";
        document.getElementById('eval-input').style.display = 'none';
        document.getElementById('eval-check-btn').style.display = 'none';
        nextBtn.disabled = false;
    }
}

function checkEvalAnswer() {
    const slideData = slidesData[currentSlide];
    const input = document.getElementById('eval-input');
    const feedback = document.getElementById('eval-feedback');
    const codeDisplay = document.getElementById('eval-code-display');

    // Normalizar respuestas: quitar espacios, convertir a min√∫sculas, quitar comillas y par√©ntesis para simplificar
    const userAnswer = input.value.trim().toLowerCase().replace(/["'()\s]/g, '');
    const correctAnswer = slideData.steps[evalStep].answer.trim().toLowerCase().replace(/["'()\s]/g, '');

    if (userAnswer === correctAnswer) {
        feedback.textContent = '¬°Correcto!';
        feedback.className = 'mt-4 h-8 text-left text-green-400';
        
        const newLine = document.createElement('div');
        newLine.className = 'code-line';
        newLine.innerHTML = slideData.steps[evalStep].codeLine;
        codeDisplay.appendChild(newLine);
        
        // Forzar reflow para que la animaci√≥n se ejecute
        void newLine.offsetWidth;
        newLine.classList.add('visible');

        evalStep++;
        setTimeout(askEvalQuestion, 600);
    } else {
        feedback.textContent = '¬°Casi! Int√©ntalo de nuevo.';
        feedback.className = 'mt-4 h-8 text-left text-red-400';
    }
}


// --- INICIALIZACI√ìN Y EVENT LISTENERS ---

document.addEventListener('DOMContentLoaded', () => {
    renderSlides();

    // Event Delegation para los botones dentro de las diapositivas
    slidesContainer.addEventListener('click', e => {
        if (e.target.classList.contains('check-answer-btn')) {
            const slideElement = e.target.closest('.slide');
            const slideData = slidesData[parseInt(slideElement.dataset.index)];
            if(slideData.type === 'quiz') handleQuizCheck(slideElement);
            if(slideData.type === 'text_input') handleTextInputCheck(slideElement);
        }
        if (e.target.classList.contains('help-button')) {
            helpModalContent.textContent = e.target.dataset.helpText;
            helpModal.classList.remove('hidden');
        }
    });

    document.getElementById('eval-check-btn')?.addEventListener('click', checkEvalAnswer);
    document.getElementById('eval-input')?.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') checkEvalAnswer();
    });


    nextBtn.addEventListener('click', () => {
        if (currentSlide < slidesData.length - 1) {
            showSlide(currentSlide + 1);
        }
    });

    prevBtn.addEventListener('click', () => {
        if (currentSlide > 0) {
            showSlide(currentSlide - 1);
        }
    });

    closeHelpModal.addEventListener('click', () => {
        helpModal.classList.add('hidden');
    });
    
    // Inicializaci√≥n del modal de bienvenida y progreso
    const savedProgress = localStorage.getItem('codeBogotaModule2Progress');
    if (savedProgress) {
        const slideNum = parseInt(savedProgress);
        document.getElementById('welcomeMessage').textContent = `Hemos detectado que ya hab√≠as avanzado. ¬øQuieres continuar desde la diapositiva ${slideNum + 1}?`;
        const welcomeButtons = document.getElementById('welcomeButtons');
        welcomeButtons.innerHTML = `
            <button id="resumeBtn" class="bg-sky-600 hover:bg-sky-500 text-white font-bold py-2 px-6 rounded-lg transition-colors w-full mb-3">S√≠, continuar</button>
            <button id="startFreshBtn" class="bg-gray-700 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg transition-colors w-full">No, empezar de nuevo</button>
        `;
        document.getElementById('resumeBtn').addEventListener('click', () => {
            welcomeModal.classList.add('hidden');
            showSlide(slideNum);
        });
    }

    document.getElementById('startFreshBtn').addEventListener('click', () => {
        welcomeModal.classList.add('hidden');
        showSlide(0);
    });
});
</script>

</body>
</html>
